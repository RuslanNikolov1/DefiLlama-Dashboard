import{g as h,b as S,j as n,h as I,i as m,k as j,l as v,n as w}from"./vendor-tTdIX1Fz.js";import{r as i}from"./recharts-DJE03qUk.js";import"./react-Dazix4UH.js";var g={};function P(){function s(){if(typeof process<"u"&&g&&g.JEST_WORKER_ID)return g.VITE_COINGECKO_API_KEY;try{return new Function("return import.meta.env.VITE_COINGECKO_API_KEY")()}catch{return}}const r=s();return h({queryKey:["coins"],queryFn:async()=>{const l=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1&sparkline=false",{headers:r?{"x-cg-pro-api-key":r}:void 0});if(!l.ok)throw new Error("Failed to fetch coins");return l.json()},staleTime:60*1e3})}const k="_container_15ob1_1",K="_filterInput_15ob1_10",N="_table_15ob1_21",E="_sortable_15ob1_33",R="_pagination_15ob1_45",M="_paginationButton_15ob1_55",L="_pageInfo_15ob1_77",a={container:k,filterInput:K,table:N,sortable:E,pagination:R,paginationButton:M,pageInfo:L},D=()=>{const{data:s,isLoading:r,error:l}=P(),[c,_]=i.useState(""),[b,f]=i.useState([]),[u,x]=i.useState({pageIndex:0,pageSize:15}),C=S(),y=i.useMemo(()=>[{accessorKey:"image",header:"",cell:e=>n.jsx("img",{src:e.getValue(),alt:"",style:{width:24,height:24}}),enableSorting:!1},{accessorKey:"name",header:"Name"},{accessorKey:"symbol",header:"Symbol",cell:e=>e.getValue().toUpperCase()},{accessorKey:"current_price",header:"Price",cell:e=>`$${(e.getValue()||0).toLocaleString(void 0,{minimumFractionDigits:2})}`},{accessorKey:"market_cap",header:"Market Cap",cell:e=>`$${(e.getValue()||0).toLocaleString()}`}],[]),d=i.useMemo(()=>s?s.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.symbol.toLowerCase().includes(c.toLowerCase())):[],[s,c]),o=I({data:d,columns:y,state:{sorting:b,pagination:u},onSortingChange:f,onPaginationChange:x,getCoreRowModel:w(),getSortedRowModel:v(),getPaginationRowModel:j(),manualPagination:!1,manualSorting:!1,pageCount:Math.ceil(d.length/u.pageSize)});return r?n.jsx("div",{children:"Loading..."}):l?n.jsx("div",{children:"Error loading coins"}):n.jsxs("div",{className:a.container,children:[n.jsx("input",{type:"text",value:c,onChange:e=>_(e.target.value),placeholder:"Filter by name or symbol...",className:a.filterInput}),n.jsxs("table",{className:a.table,children:[n.jsx("thead",{children:o.getHeaderGroups().map(e=>n.jsx("tr",{children:e.headers.map(t=>n.jsxs("th",{onClick:t.column.getToggleSortingHandler(),className:t.column.getCanSort()?a.sortable:"","aria-sort":t.column.getIsSorted()?t.column.getIsSorted()==="desc"?"descending":"ascending":"none",tabIndex:t.column.getCanSort()?0:-1,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&t.column.getCanSort()&&t.column.toggleSorting()},children:[m(t.column.columnDef.header,t.getContext()),t.column.getIsSorted()?t.column.getIsSorted()==="desc"?" ↓":" ↑":""]},t.id))},e.id))}),n.jsx("tbody",{children:o.getRowModel().rows.map(e=>n.jsx("tr",{onClick:()=>C(`/coin/${e.original.id}`),style:{cursor:"pointer"},children:e.getVisibleCells().map(t=>n.jsx("td",{children:m(t.column.columnDef.cell,t.getContext())},t.id))},e.id))})]}),n.jsxs("div",{className:a.pagination,children:[n.jsx("button",{onClick:()=>o.previousPage(),disabled:!o.getCanPreviousPage(),className:a.paginationButton,children:"Previous"}),n.jsxs("span",{className:a.pageInfo,children:["Page ",o.getState().pagination.pageIndex+1," of ",o.getPageCount()]}),n.jsx("button",{onClick:()=>o.nextPage(),disabled:!o.getCanNextPage(),className:a.paginationButton,children:"Next"})]})]})};export{D as default};
