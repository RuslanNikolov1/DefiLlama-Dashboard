import{o as w,j as e}from"./vendor-tTdIX1Fz.js";import{r as s}from"./recharts-DJE03qUk.js";import{f as C,a as j,p as S}from"./newsApi-Bs_5FYXF.js";import{u as v}from"./index-of9PqBSW.js";import"./react-Dazix4UH.js";const N="_container_42uhj_1",A="_title_42uhj_11",E="_description_42uhj_26",L="_publishedAt_42uhj_34",a={container:N,title:A,description:E,publishedAt:L},k=()=>{const{id:n}=w(),{user:g}=v(),[o,m]=s.useState(null),[b,d]=s.useState(!0),[u,l]=s.useState([]),[r,h]=s.useState(""),[c,p]=s.useState(!1),[f,x]=s.useState(null);s.useEffect(()=>{C().then(t=>{const i=(Array.isArray(t)?t:[]).find(y=>y.id===n);m(i||null),d(!1)}).catch(()=>{m(null),d(!1)})},[n]),s.useEffect(()=>{n&&j(n).then(l).catch(()=>l([]))},[n]);const _=async t=>{if(t.preventDefault(),!!r.trim()){p(!0),x(null);try{await S(n,r.trim()),h("");const i=await j(n);l(i)}catch{x("Failed to post comment.")}finally{p(!1)}}};return b?e.jsx("div",{children:"Loading news..."}):o?e.jsxs("article",{className:a.container,children:[e.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",className:a.title,children:o.title}),e.jsx("div",{className:a.description,children:o.description||"No description available."}),e.jsx("div",{className:a.publishedAt,children:new Date(o.published_at).toLocaleString()}),e.jsxs("section",{style:{marginTop:32},children:[e.jsx("h3",{children:"Comments"}),u.length===0&&e.jsx("p",{children:"No comments yet."}),e.jsx("ul",{children:u.map(t=>e.jsxs("li",{style:{marginBottom:12},children:[e.jsx("strong",{children:t.username}),": ",t.text,e.jsx("br",{}),e.jsx("small",{children:new Date(t.createdAt).toLocaleString()})]},t._id))}),g?e.jsxs("form",{onSubmit:_,style:{marginTop:16},children:[e.jsx("textarea",{value:r,onChange:t=>h(t.target.value),rows:3,style:{width:"100%",resize:"vertical"},placeholder:"Add a comment...",disabled:c}),e.jsx("br",{}),e.jsx("button",{type:"submit",disabled:c||!r.trim(),children:c?"Posting...":"Post Comment"}),f&&e.jsx("div",{style:{color:"red"},children:f})]}):e.jsx("p",{style:{color:"#888"},children:"Sign in to post a comment."})]})]}):e.jsx("div",{children:"News item not found."})};export{k as default};
