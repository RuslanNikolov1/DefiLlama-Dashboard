import{o as N,j as e}from"./vendor-tTdIX1Fz.js";import{r as s,b as d,L as c,X as h,Y as x,T as p,C as m,c as g}from"./recharts-DJE03qUk.js";import"./react-Dazix4UH.js";const E="_whereToBuyTableWrapper_1sedm_1",K={whereToBuyTableWrapper:E};var j={};const I=()=>{const{id:n}=N();function _(){if(typeof process<"u"&&j&&j.JEST_WORKER_ID)return j.VITE_COINGECKO_API_KEY;try{return new Function("return import.meta.env.VITE_COINGECKO_API_KEY")()}catch{return}}const i=_(),[a,v]=s.useState(null),[k,o]=s.useState(!0),[u,y]=s.useState(null),[f,S]=s.useState([]),[b,A]=s.useState([]),[L,C]=s.useState([]),[w,D]=s.useState([]);return s.useEffect(()=>{n&&(o(!0),y(null),Promise.all([fetch(`https://api.coingecko.com/api/v3/coins/${n}?localization=false&tickers=true&market_data=true&community_data=true&developer_data=true&sparkline=false`,{headers:i?{"x-cg-pro-api-key":i}:void 0}).then(t=>t.json()),fetch(`https://api.coingecko.com/api/v3/coins/${n}/market_chart?vs_currency=usd&days=90`,{headers:i?{"x-cg-pro-api-key":i}:void 0}).then(t=>t.json()),fetch(`https://api.coingecko.com/api/v3/coins/${n}/tickers?include_exchange_logo=true`,{headers:i?{"x-cg-pro-api-key":i}:void 0}).then(t=>t.json())]).then(([t,l,T])=>{v(t),S((l.prices||[]).map(r=>({timestamp:r[0],value:r[1]}))),A((l.market_caps||[]).map(r=>({timestamp:r[0],value:r[1]}))),C((l.total_volumes||[]).map(r=>({timestamp:r[0],value:r[1]}))),D(T.tickers||[]),o(!1)}).catch(t=>{y("Failed to load coin data"),o(!1)}))},[n,i]),k?e.jsx("div",{children:"Loading coin data..."}):u||!a?e.jsx("div",{children:u||"Coin not found"}):e.jsxs("div",{style:{maxWidth:900,margin:"2rem auto",background:"var(--card-background)",borderRadius:16,padding:24,boxShadow:"0 0 12px var(--shadow-color)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:24,marginBottom:24},children:[e.jsx("img",{src:a.image.large,alt:a.name,style:{width:64,height:64}}),e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:0},children:[a.name??"N/A"," (",a.symbol?.toUpperCase()??"N/A",")"]}),e.jsxs("div",{style:{fontSize:24,fontWeight:600},children:["$",a.market_data?.current_price?.usd?.toLocaleString?.()??"N/A"]}),e.jsxs("div",{style:{color:(a.market_data?.price_change_percentage_24h??0)>=0?"var(--success-color)":"var(--error-color)"},children:["24h: ",(a.market_data?.price_change_percentage_24h??0).toFixed(2),"%"]}),e.jsxs("div",{children:["Rank #",a.market_cap_rank??"N/A"]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:32,marginBottom:32},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Price (90d)"}),e.jsx(d,{width:"100%",height:200,children:e.jsxs(c,{data:f,children:[e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(x,{}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(g,{type:"monotone",dataKey:"value",stroke:"#8884d8",dot:!1})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Market Cap (90d)"}),e.jsx(d,{width:"100%",height:200,children:e.jsxs(c,{data:b,children:[e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(x,{}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(g,{type:"monotone",dataKey:"value",stroke:"#82ca9d",dot:!1})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Volume (90d)"}),e.jsx(d,{width:"100%",height:200,children:e.jsxs(c,{data:L,children:[e.jsx(h,{dataKey:"timestamp",tickFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(x,{}),e.jsx(p,{labelFormatter:t=>new Date(t).toLocaleDateString()}),e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(g,{type:"monotone",dataKey:"value",stroke:"#ffc658",dot:!1})]})})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:32,marginBottom:32},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Market Cap:"}),e.jsx("br",{}),"$",a.market_data?.market_cap?.usd?.toLocaleString?.()??"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Circulating Supply:"}),e.jsx("br",{}),a.market_data?.circulating_supply?.toLocaleString?.()??"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Supply:"}),e.jsx("br",{}),a.market_data?.total_supply?.toLocaleString?.()??"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Max Supply:"}),e.jsx("br",{}),a.market_data?.max_supply?.toLocaleString?.()??"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"All-Time High:"}),e.jsx("br",{}),"$",a.market_data?.ath?.usd?.toLocaleString?.()??"N/A"," (",a.market_data?.ath_date?.usd?new Date(a.market_data.ath_date.usd).toLocaleDateString():"N/A",")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"All-Time Low:"}),e.jsx("br",{}),"$",a.market_data?.atl?.usd?.toLocaleString?.()??"N/A"," (",a.market_data?.atl_date?.usd?new Date(a.market_data.atl_date.usd).toLocaleDateString():"N/A",")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Genesis Date:"}),e.jsx("br",{}),a.genesis_date??"N/A"]})]}),e.jsxs("div",{style:{marginBottom:32},children:[e.jsx("h3",{children:"Description"}),e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:16},dangerouslySetInnerHTML:{__html:a.description.en?.split(". ")[0]+"."}}),e.jsx("div",{style:{marginTop:8},children:e.jsx("a",{href:a.links.homepage[0],target:"_blank",rel:"noopener noreferrer",children:"Official Website"})})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"Where to Buy"}),e.jsx("div",{className:K.whereToBuyTableWrapper,children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",padding:8},children:"Exchange"}),e.jsx("th",{style:{textAlign:"left",padding:8},children:"Pair"}),e.jsx("th",{style:{textAlign:"left",padding:8},children:"Price"}),e.jsx("th",{style:{textAlign:"left",padding:8},children:"Volume (24h)"})]})}),e.jsx("tbody",{children:w.slice(0,10).map((t,l)=>e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:8},children:[t.market.name," ",t.market.logo&&e.jsx("img",{src:t.market.logo,alt:t.market.name,style:{width:18,height:18,verticalAlign:"middle",marginLeft:4}})]}),e.jsxs("td",{style:{padding:8},children:[t.base,"/",t.target]}),e.jsxs("td",{style:{padding:8},children:["$",t.last.toLocaleString()]}),e.jsxs("td",{style:{padding:8},children:["$",t.converted_volume?.usd?.toLocaleString()||"N/A"]})]},l))})]})})]})]})};export{I as default};
